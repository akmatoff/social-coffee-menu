---
import getCategories from "../api/getCategories";
import { CategoryType } from "../types";

const language = Astro.url.searchParams.get("lang") || "ru";
const categories = await getCategories(language);

const menus = categories.filter(
  (category) => category.category_type === CategoryType.MENU
);

const firstMenu = menus?.[0]?.slug || "menyu";

return Astro.redirect(`/${firstMenu}?lang=${language}`);
---
